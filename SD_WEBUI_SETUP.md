# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Stable Diffusion WebUI –¥–ª—è Adetailer

## üéØ –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ **SD WebUI –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π**: `~/stable-diffusion-webui/`
‚úÖ **Adetailer –¥–æ–¥–∞–Ω–æ**: `~/stable-diffusion-webui/extensions/adetailer/`
‚è≥ **SD WebUI –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è** (–ø–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ –∑–∞–π–º–∞—î 5-10 —Ö–≤–∏–ª–∏–Ω)

## üöÄ –ó–∞–ø—É—Å–∫ SD WebUI

### –ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ (–∑–∞—Ä–∞–∑ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è)
```bash
cd ~/stable-diffusion-webui
./webui.sh --api --listen --port 7860
```

### –ù–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ø—É—Å–∫–∏
```bash
cd ~/stable-diffusion-webui
./webui.sh --api
```

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ SD WebUI –∑–∞–ø—É—â–µ–Ω–∏–π
curl http://localhost:7860/sdapi/v1/progress

# –ê–±–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
open http://localhost:7860
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –æ–±—Ä–æ–±–∫–∏

### –î–µ–º–æ –≤–µ—Ä—Å—ñ—è (FLUX API)
- ‚úÖ **–û–±—Ä–æ–±–ª–µ–Ω–æ**: 46 –∑–æ–±—Ä–∞–∂–µ–Ω—å
- üìÅ **–ü–∞–ø–∫–∞**: `data/output/adetailer_processed/`
- üéØ **–¢–∏–ø**: –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑ –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è–º

### SD WebUI –≤–µ—Ä—Å—ñ—è (–∫–æ–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è)
- üìÅ **–ü–∞–ø–∫–∞**: `data/output/sd_webui_processed/`
- üéØ **–¢–∏–ø**: –ü–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑ Adetailer
- ‚ö° **–Ø–∫—ñ—Å—Ç—å**: –í–∏—Å–æ–∫–∞ –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º –æ–±–ª–∏—á

## üé® –ó–∞–ø—É—Å–∫ –æ–±—Ä–æ–±–∫–∏ —á–µ—Ä–µ–∑ SD WebUI

–ö–æ–ª–∏ SD WebUI –±—É–¥–µ –≥–æ—Ç–æ–≤–∏–π:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è
curl http://localhost:7860/sdapi/v1/progress

# –ó–∞–ø—É—Å–∫ –æ–±—Ä–æ–±–∫–∏
./scripts/run_sd_webui.sh

# –ê–±–æ –Ω–∞–ø—Ä—è–º—É
python bin/process_with_sd_webui.py
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Adetailer

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
```python
adetailer_config = {
    "model": "face_yolov8n.pt",      # –ú–æ–¥–µ–ª—å –¥–ª—è –æ–±–ª–∏—á
    "confidence": 0.4,               # –í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü—ñ—ó
    "dilation": 4,                   # –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –º–∞—Å–∫–∏
    "denoising_strength": 0.5,       # –°–∏–ª–∞ –¥–µ–Ω–æ—ó–∑–∏–Ω–≥—É
    "steps": 25,                     # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤
    "cfg_scale": 8.0,                # CFG Scale
    "sampler": "DPM++ 2M Karras",    # –°–µ–º–ø–ª–µ—Ä
    "width": 512,                    # –®–∏—Ä–∏–Ω–∞
    "height": 512                    # –í–∏—Å–æ—Ç–∞
}
```

## üîß –ú–æ–¥–µ–ª—ñ Adetailer

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è:
- `face_yolov8n.pt` - –¥–ª—è –æ–±–ª–∏—á
- `hand_yolov8n.pt` - –¥–ª—è —Ä—É–∫
- `person_yolov8n.pt` - –¥–ª—è –ø–æ–≤–Ω–∏—Ö —Ñ—ñ–≥—É—Ä

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
data/output/
‚îú‚îÄ‚îÄ [–æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è]        # 69 —Ñ–∞–π–ª—ñ–≤
‚îú‚îÄ‚îÄ adetailer_processed/             # –î–µ–º–æ –≤–µ—Ä—Å—ñ—è (46 —Ñ–∞–π–ª—ñ–≤)
‚îî‚îÄ‚îÄ sd_webui_processed/              # SD WebUI –≤–µ—Ä—Å—ñ—è (–∫–æ–ª–∏ –≥–æ—Ç–æ–≤–æ)
```

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–ó–∞—á–µ–∫–∞—Ç–∏ –∑–∞–ø—É—Å–∫—É SD WebUI** (5-10 —Ö–≤–∏–ª–∏–Ω)
2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è**: `curl http://localhost:7860/sdapi/v1/progress`
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É**: `./scripts/run_sd_webui.sh`
4. **–ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏** –º—ñ–∂ –¥–µ–º–æ —Ç–∞ SD WebUI –≤–µ—Ä—Å—ñ—è–º–∏

## üîó –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É SD WebUI
curl -s http://localhost:7860/sdapi/v1/progress > /dev/null && echo "‚úÖ –ì–æ—Ç–æ–≤–∏–π" || echo "‚ùå –ù–µ –≥–æ—Ç–æ–≤–∏–π"

# –ó–∞–ø—É—Å–∫ –æ–±—Ä–æ–±–∫–∏
./scripts/run_sd_webui.sh

# –ü–µ—Ä–µ–≥–ª—è–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
ls -la data/output/sd_webui_processed/

# –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤
echo "–î–µ–º–æ: $(find data/output/adetailer_processed -name '*.jpg' | wc -l)"
echo "SD WebUI: $(find data/output/sd_webui_processed -name '*.jpg' | wc -l)"
```

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- **–ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ SD WebUI** –∑–∞–π–º–∞—î —á–∞—Å –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π
- **–î–µ–º–æ –≤–µ—Ä—Å—ñ—è** –ø–æ–∫–∞–∑—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é —Ñ–∞–π–ª—ñ–≤
- **SD WebUI –≤–µ—Ä—Å—ñ—è** –Ω–∞–¥–∞—Å—Ç—å —Ä–µ–∞–ª—å–Ω—É –æ–±—Ä–æ–±–∫—É –∑ Adetailer
- **–í—Å—ñ —Ñ–∞–π–ª–∏** –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –æ–∫—Ä–µ–º–∏—Ö –ø–∞–ø–∫–∞—Ö –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è 